From 0500f7183769f6f915915e1ca9fa7cc121b0f906 Mon Sep 17 00:00:00 2001
From: Natanael Copa <ncopa@alpinelinux.org>
Date: Mon, 8 May 2023 13:47:20 +0200
Subject: [PATCH 08/12] Don't print error on missing /proc/mounts

This is useful for testing
---
 lib/tiny-cloud/init | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/lib/tiny-cloud/init b/lib/tiny-cloud/init
index 4c46df3..580ab2d 100644
--- a/lib/tiny-cloud/init
+++ b/lib/tiny-cloud/init
@@ -36,8 +36,8 @@ DEFAULT_ACTIONS_FINAL=""
 ### standard init-early functions...
 
 init__expand_root() {
-    local dev=$(awk '$2 == "/" {print $1}' "$ROOT"/proc/mounts)
-    local filesystem=$(awk '$2 == "/" {print $3}' "$ROOT"/proc/mounts)
+    local dev=$(awk '$2 == "/" {print $1}' "$ROOT"/proc/mounts 2>/dev/null)
+    local filesystem=$(awk '$2 == "/" {print $3}' "$ROOT"/proc/mounts 2>/dev/null)
     local partition=$(cat "$ROOT/sys/class/block/${dev#/dev/}/partition" 2>/dev/null)
 
     # only support ext2/ext3/ext4 for now
-- 
2.40.1

