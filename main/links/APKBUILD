# Contributor: Natanael Copa <ncopa@alpinelinux.org>
# Maintainer: Celeste <cielesti@protonmail.com>
pkgname=links
pkgver=2.29
pkgrel=2
pkgdesc="Web browser running in both graphics and text mode"
url="http://links.twibright.com/"
arch="all"
license="GPL-2.0-or-later WITH OpenSSL-Exception"
makedepends="
	bzip2-dev
	libevent-dev
	openssl-dev
	zlib-dev
	zstd-dev
	"
subpackages="$pkgname-doc"
source="http://links.twibright.com/download/links-$pkgver.tar.bz2
	configure.patch
	"
options="!check"  # No test suite.

build() {
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--sysconfdir=/etc \
		--mandir=/usr/share/man \
		--localstatedir=/var \
		--disable-javascript \
		--disable-graphics \
		--without-x \
		--disable-nls
	make
}

package() {
	make DESTDIR="$pkgdir" install
}

sha512sums="
5ea8b2fd0eb74d9dc2b45614aef6ee878fe686dff9bcee75ac6ea01f6a7331670f7709233d31986fc64ad86ce549616a4471057837b6caf15af6d1c5c503ac75  links-2.29.tar.bz2
64256e2e9ecbe59bedcac038f560383a45d65aa75a09ff1fe5882a95c029df5c94729b7f1c625af1baca9a2884e37e0d5b1a8202808cac5e41d189659e46d3f5  configure.patch
"
