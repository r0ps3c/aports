From 97d65859bc29ee334012e9c73022d8a8e55ed586 Mon Sep 17 00:00:00 2001
From: Su Laus <sulau@freenet.de>
Date: Sat, 21 Jan 2023 15:58:10 +0000
Subject: [PATCH] tiffcrop: Correct simple copy paste error. Fix #488.

---
 tools/tiffcrop.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/tools/tiffcrop.c b/tools/tiffcrop.c
index 1f827b2..50d2dc3 100644
--- a/tools/tiffcrop.c
+++ b/tools/tiffcrop.c
@@ -7589,7 +7589,7 @@ processCropSelections(struct image_data *image, struct crop_mask *crop,
       crop_buff = (unsigned char *)limitMalloc(cropsize);
     else
       {
-      prev_cropsize = seg_buffs[0].size;
+      prev_cropsize = seg_buffs[i].size;
       if (prev_cropsize < cropsize)
         {
         next_buff = _TIFFrealloc(crop_buff, cropsize);
@@ -7692,7 +7692,7 @@ processCropSelections(struct image_data *image, struct crop_mask *crop,
         crop_buff = (unsigned char *)limitMalloc(cropsize);
       else
         {
-        prev_cropsize = seg_buffs[0].size;
+        prev_cropsize = seg_buffs[1].size;
         if (prev_cropsize < cropsize)
           {
           next_buff = _TIFFrealloc(crop_buff, cropsize);
