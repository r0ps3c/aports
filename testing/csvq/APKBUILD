# Contributor: Grigory Kirillov <txgk@bk.ru>
# Maintainer: Grigory Kirillov <txgk@bk.ru>
pkgname=csvq
pkgver=1.18.0
pkgrel=0
pkgdesc="SQL-like query language for csv format"
url="https://github.com/mithrandie/csvq"
arch="all"
license="MIT"
options="!check" # no test suite
makedepends="go"
source="https://github.com/mithrandie/csvq/archive/v$pkgver/csvq-v$pkgver.tar.gz
	no-ldflags.patch
	"

export GOCACHE="${GOCACHE:-"$srcdir/go-cache"}"
export GOTMPDIR="${GOTMPDIR:-"$srcdir"}"
export GOMODCACHE="${GOMODCACHE:-"$srcdir/go"}"

build() {
	make VERSION=$pkgver build
}

package() {
	install -Dm755 build/bin/csvq -t "$pkgdir"/usr/bin
}

sha512sums="
6a6edf026c2f25a5b19cb5cac31dcac0f82840b02e9eea27ec7f5953f76b85ada1e8ea359c4a5d540cad2ad1390b4948e4a83d7522fa3060ec379744220cecdf  csvq-v1.18.0.tar.gz
acd77fddfad54c4f226eb50c0e5db32ad413195f97575cb3e9de81559904d1ff3920ca244924e68c3783cef847fb68f7032a082ebef23b51572880f702ac168e  no-ldflags.patch
"
