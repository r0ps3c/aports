# Contributor: Matthias Ahouansou <matthias@ahouansou.cz>
# Maintainer: Matthias Ahouansou <matthias@ahouansou.cz>
pkgname=leptosfmt
pkgver=0.1.17
pkgrel=0
pkgdesc="A formatter for the leptos view! macro"
url="https://github.com/bram209/leptosfmt"
arch="all"
license="MIT OR Apache-2.0"
makedepends="
	cargo
	cargo-auditable
"
subpackages="$pkgname-doc"
source="$pkgname-$pkgver.tar.gz::https://github.com/bram209/leptosfmt/archive/refs/tags/$pkgver.tar.gz"
options="net"

prepare() {
	default_prepare
	cargo fetch --target="$CTARGET" --locked
}

build() {
	cargo auditable build --release --frozen
}

check() {
	cargo test --frozen
}

package() {
	install -Dm 755 target/release/leptosfmt "$pkgdir"/usr/bin/leptosfmt

	for l in -APACHE -MIT
	do
		install -Dm 644 LICENSE"$l" "$pkgdir"/usr/share/licenses/"$pkgname"/LICENSE"$l"
	done
}

sha512sums="
59b182f6de5b0e18550749c3f172712626d1804fbd7e4dfe69614f59daa10ee6b1418bce180ea888425dbcdbe3078e12a2bfe4b98fcfa071cc2971a3bfcc1369  leptosfmt-0.1.17.tar.gz
"
