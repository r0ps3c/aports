# Automatically generated by apkbuild-cpan, template 4
# Maintainer: Celeste <cielesti@protonmail.com>
maintainer="Celeste <cielesti@protonmail.com>"
pkgname=perl-net-xmpp
#_pkgreal is used by apkbuild-cpan to find modules at MetaCpan
_pkgreal=Net-XMPP
pkgver=1.05
pkgrel=0
pkgdesc="XMPP Support Library"
url="https://metacpan.org/release/Net-XMPP/"
arch="noarch"
license="LGPL-2.1-or-later"
depends="perl perl-authen-sasl perl-xml-stream"
makedepends="perl-module-build"
checkdepends="perl-lwp-online perl-test-memory-cycle perl-yaml-tiny"
subpackages="$pkgname-doc"
source="https://cpan.metacpan.org/authors/id/D/DA/DAPATRICK/Net-XMPP-$pkgver.tar.gz
	loop-var.patch
	no-gtalk.patch
	"
builddir="$srcdir/$_pkgreal-$pkgver"

build() {
	export CFLAGS=$(perl -MConfig -E 'say $Config{ccflags}')
	perl Build.PL \
		--installdirs=vendor \
		--create_packlist=0
	./Build
}

check() {
	./Build test
}

package() {
	./Build install --destdir="$pkgdir"
}

sha512sums="
cdd5474fcbdf7ff6c7d1247f9828f5dfb1828c258af366a831bab8e5faab423b73aa16c34228818526ebcc3180ef0ccc52d6e6cb61e2fe689458b87ec7fab699  Net-XMPP-1.05.tar.gz
8d815b04233b140881ff105f64d5017dbd937ed03521516a8cd2ba60bb0e07dec7d27903d8a35eb4e23b4ef52ccb4703fa7f0ea698dcca64d1ead3a6a7f2740b  loop-var.patch
678db0127de65198b52094afc94c7d057fead39a3f70dc782c4d661ace8d199cd37f632fe29e0699f9f656ae467cd91c191803f3043e966d2db2a7c475fb48c5  no-gtalk.patch
"
