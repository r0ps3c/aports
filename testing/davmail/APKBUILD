# Maintainer: Struan Robertson <contact@struan.tech>
pkgname=davmail
pkgver=6.2.2
pkgrel=0
pkgdesc="DavMail POP/IMAP/SMTP/Caldav/Carddav/LDAP Exchange and Office 365 Gateway"
url="https://davmail.sourceforge.net"
# riscv64: blocked by openjdk8
arch="noarch !riscv64"
license="GPL-2.0-only"
makedepends="
	apache-ant
	openjdk8
"
depends="
	java-jdk
"
source="
	$pkgname-$pkgver.tar.gz::https://github.com/mguessan/davmail/archive/$pkgver/davmail-$pkgver.tar.gz
	fix_linux_build.patch
"
options="net !check"

build() {
	ant
}

package() {
	  cd dist
	  mkdir -p "$pkgdir"/usr/share/"$pkgname"/lib
	  install -Dm644 "$pkgname".jar "$pkgdir"/usr/share/"$pkgname"
	  install -D lib/* "$pkgdir"/usr/share/"$pkgname"/lib
	  mkdir -p "$pkgdir"/usr/bin/
	  install -Dm755 "$pkgname" "$pkgdir"/usr/bin/
}

sha512sums="
599b8a5e4f6543e675b63ebe7feb4e6e6eaa73fd95546676b42a0f91d9bca2f51f6abc3df43f66e1a4ec84126c91ce9580b12d1d1b4c1d893633c18d026e2329  davmail-6.2.2.tar.gz
56844ebf7332b186ba3e772ba2b9954bf64d67f2ad039e65d060118ce465d061706564c2a409b931b7a3bcde25372dd8a74c9fd49fbe253945ec50bf7b287ba2  fix_linux_build.patch
"
