# Automatically generated by apkbuild-cpan, template 3
# Contributor: Celeste <cielesti@protonmail.com>
# Maintainer: Celeste <cielesti@protonmail.com>
pkgname=perl-xml-stream
#_pkgreal is used by apkbuild-cpan to find modules at MetaCpan
_pkgreal=XML-Stream
pkgver=1.24
pkgrel=0
pkgdesc="XML stream support library for XMPP-like protocols"
url="https://metacpan.org/release/XML-Stream/"
arch="noarch"
license="LGPL-2.1-or-later"
depends="perl perl-authen-sasl perl-io-socket-ssl"
makedepends="perl-module-build"
subpackages="$pkgname-doc"
source="https://cpan.metacpan.org/authors/id/D/DA/DAPATRICK/XML-Stream-$pkgver.tar.gz
	improvements.patch
	"
builddir="$srcdir/$_pkgreal-$pkgver"

build() {
	export CFLAGS=$(perl -MConfig -E 'say $Config{ccflags}')
	perl Build.PL --installdirs=vendor
	./Build
}

check() {
	./Build test
}

package() {
	./Build install --destdir="$pkgdir"
	find "$pkgdir" \( -name perllocal.pod -o -name .packlist \) -delete
}

sha512sums="
f762e09197fa7f36cee8484e30a6ce972e407d92cbe55bdf96bcc0073187aff34630c5d9dd2555a14cd297e506875dc2ff153b09001c971b020c37340886025d  XML-Stream-1.24.tar.gz
e7b165c381f80e1db2639a71fa13620b8bcdcb6098d9cb414d5a382d06ee2b28dc8834af07e0d587152ab0bed1aceb4c57b332de933262731bb0e9ec1e658180  improvements.patch
"
