Patch-Source: https://github.com/jbruchon/libjodycode/commit/b0f531c51eec87381ce13d9bf9d302c78a2e6329
--
From b0f531c51eec87381ce13d9bf9d302c78a2e6329 Mon Sep 17 00:00:00 2001
From: Jody Bruchon <jody@jodybruchon.com>
Date: Sun, 7 May 2023 11:53:36 -0400
Subject: [PATCH] Fix version grep in Makefile (GitHub issue #3)

---
 Makefile | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/Makefile b/Makefile
index 41c8687..e899f2c 100644
--- a/Makefile
+++ b/Makefile
@@ -28,8 +28,8 @@ LINK_OPTIONS += -Wl,-soname,$(PROGRAM_NAME).$(SUFFIX).$(API_VERSION)
 COMPILER_OPTIONS += -DSMA_PASSTHROUGH
 
 UNAME_S=$(shell uname -s)
-VERSION=$(shell grep '^.define VER ' libjodycode.h | sed 's/[^"]*"//;s/".*//')
-VERSION_MAJOR=$(shell grep '^.define VER ' libjodycode.h | sed 's/[^"]*"//;s/\..*//')
+VERSION=$(shell grep -m 1 '^.define LIBJODYCODE_VER ' libjodycode.h | sed 's/[^"]*"//;s/".*//')
+VERSION_MAJOR=$(shell grep -m 1 '^.define LIBJODYCODE_VER ' libjodycode.h | sed 's/[^"]*"//;s/\..*//')
 
 # Don't use unsupported compiler options on gcc 3/4 (Mac OS X 10.5.8 Xcode)
 ifeq ($(UNAME_S), Darwin)
