# Maintainer: psykose <alice@ayaya.dev>
pkgname=libjodycode
pkgver=1.1
pkgrel=0
pkgdesc="Shared code used by several utilities written by Jody Bruchon"
url="https://github.com/jbruchon/libjodycode"
arch="all"
license="MIT"
subpackages="$pkgname-dev $pkgname-doc"
source="$pkgname-$pkgver.tar.gz::https://github.com/jbruchon/libjodycode/archive/refs/tags/v$pkgver.tar.gz"
options="!check" # no tests

build() {
	make -j1 CFLAGS="$CFLAGS -flto=auto"
}

package() {
	make -j1 DESTDIR="$pkgdir" PREFIX=/usr install
	rm -v "$pkgdir"/usr/lib/*.a
}

sha512sums="
9f64e3d867bd431231798fe3aaef6d692e956fd1c77f8c49174346ee92434d08b57e6c7e37bf4c1500fec46bacdd56254e5562adbe29aebdb71d2b9f28ce8fe6  libjodycode-1.1.tar.gz
"
