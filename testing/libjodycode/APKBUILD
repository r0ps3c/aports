# Maintainer: psykose <alice@ayaya.dev>
pkgname=libjodycode
pkgver=1.0
pkgrel=0
pkgdesc="Shared code used by several utilities written by Jody Bruchon"
url="https://github.com/jbruchon/libjodycode"
arch="all"
license="MIT"
subpackages="$pkgname-dev $pkgname-doc"
source="$pkgname-$pkgver.tar.gz::https://github.com/jbruchon/libjodycode/archive/refs/tags/v$pkgver.tar.gz
	fix-makefile.patch
	"
options="!check" # no tests

build() {
	make CFLAGS="$CFLAGS -flto=auto"
}

package() {
	make INSTALL="install -D" DESTDIR="$pkgdir" PREFIX=/usr install
	rm -v "$pkgdir"/usr/lib/*.a
}

sha512sums="
f9a1365f1335dec0465b0ae96247069456376493e1eca6086cf13b627d3f866d1dc1ae5c933b718406f66bd915a6e1ca7c2e4d06a6333bbbcb5f84ab3f945abf  libjodycode-1.0.tar.gz
971d645593727e6cb33ea91c21cfba0dc5057d9e1177a1de578f18ef3eb73b9ef5eef09b7680730d7a8caf6762a44694b91e200a165d0dd5c7508c77a0a0c714  fix-makefile.patch
"
