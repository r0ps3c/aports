# Maintainer: Willow Barraco <contact@willowbarraco.fr>
pkgname=splitter
pkgver=0.1.0
pkgrel=0
pkgdesc="A speedrunning GUI"
url="https://sr.ht/~stacyharper/splitter/"
#arch="x86_64 aarch64 riscv64" # hare
license="AGPL-3.0-or-later"
makedepends="
	wayland-dev
	wayland-protocols
	libbsd-dev
	cairo-dev
	libxkbcommon-dev
	hare
	hare-ev
	hare-wayland
	hare-cairo
	hare-xkb
	scdoc
	"
subpackages="$pkgname-doc"
source="$pkgname-$pkgver.tar.gz::https://git.sr.ht/~stacyharper/splitter/archive/$pkgver.tar.gz"

# Work-around of https://todo.sr.ht/~sircmpwn/hare/723#event-261138
case "$CARCH" in
	aarch64)
		export LDFLAGS="-no-pie $LDFLAGS"
		;;
esac

build() {
	make -j1 PREFIX=/usr
}

check() {
	make check
}

package() {
	make DESTDIR="$pkgdir" PREFIX="/usr" install
}

sha512sums="
fe355b3bedae78bf67ee62478ec0ba4f8064aa512b9e4b82994d9e82214cea4f1381fa62b7f7d058c2082d5f7c869d3b96629abf7a84af18c3dbeda3850b5153  splitter-0.1.0.tar.gz
"
