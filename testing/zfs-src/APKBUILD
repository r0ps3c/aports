# Contributor: Umar Getagazov <umar@handlerug.me>
# Maintainer: Umar Getagazov <umar@handlerug.me>
pkgname=zfs-src
_modname=${pkgname%-src}
pkgver=2.1.10
pkgrel=1
pkgdesc="ZFS for Linux (sources, AKMS)"
url="https://zfsonlinux.org"
arch="noarch"
license="CDDL-1.0"
depends="akms"
options="!check"  # irrelevant for a -src package
source="https://github.com/openzfs/zfs/releases/download/zfs-$pkgver/zfs-$pkgver.tar.gz
	revert-sparse-file-break.patch
	AKMBUILD
	"
builddir="$srcdir/$_modname-$pkgver"

package() {
	mkdir -p "$pkgdir"/usr/src
	cp -r "$builddir" "$pkgdir"/usr/src/zfs
	install -Dm644 "$srcdir"/AKMBUILD "$pkgdir"/usr/src/zfs/AKMBUILD
}

sha512sums="
3189c6f822c7b6caba650a43f321114ef0bd42b72f566c44ba2400005c61cc3d420149a72520aed5b94494c51c35629a6f645273941774d964f2b61c31c366b2  zfs-2.1.10.tar.gz
474273cef96c0ff5355c2204466efb60cd32d862b72b43573f6d254312ab2b55f571bc9e2647c2e0ed95caa6387461875269ebcacadc8ed5ba444c01b88f9463  revert-sparse-file-break.patch
ed8b3bbd3a88b6be71d70955fae6292fdec6de6c794dbe57393d2f8653fee35461f3fbbfea5156bc0004cfadfe193b2539fdccbcee775b62aea6b793272e10e4  AKMBUILD
"
