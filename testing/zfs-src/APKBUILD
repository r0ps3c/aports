# Contributor: Umar Getagazov <umar@handlerug.me>
# Maintainer: Umar Getagazov <umar@handlerug.me>
pkgname=zfs-src
_modname=${pkgname%-src}
pkgver=2.1.8
pkgrel=0
pkgdesc="ZFS for Linux (sources, AKMS)"
url="https://zfsonlinux.org"
arch="noarch"
license="CDDL-1.0"
depends="akms"
options="!check"  # irrelevant for a -src package
source="https://github.com/openzfs/zfs/releases/download/zfs-$pkgver/zfs-$pkgver.tar.gz
	AKMBUILD"
builddir="$srcdir/$_modname-$pkgver"

package() {
	mkdir -p "$pkgdir"/usr/src
	cp -r "$builddir" "$pkgdir"/usr/src/zfs
	install -Dm644 "$srcdir"/AKMBUILD "$pkgdir"/usr/src/zfs/AKMBUILD
}

sha512sums="
9c6c2c30f55b089ce29f8895ccc9032615ab25e47291b2d3384bcbb3d1fdb2e7a6fb67725a6fae04b6e28bfdc6dc97fae3b9b3ed8f802e75866c83eabf79c296  zfs-2.1.8.tar.gz
a4377227d3965b18c953070798aad84e0e4bb3d8c0143841a1f3f0fddbdf4fe4798301330fd37e9f714f8f8f819e0ab5f2381787bf490e220fb8d8806d3a2ca7  AKMBUILD
"
