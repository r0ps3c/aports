# Maintainer: psykose <alice@ayaya.dev>
pkgname=xdg-desktop-portal-hyprland
pkgver=0.4.0
pkgrel=0
pkgdesc="xdg-desktop-portal backend for hyprland "
url="https://github.com/hyprwm/xdg-desktop-portal-hyprland"
arch="all"
license="MIT"
depends="qt6-qtwayland"
makedepends="
	basu-dev
	hyprland-dev
	inih-dev
	libdrm-dev
	mesa-dev
	meson
	util-linux-dev
	pipewire-dev
	wayland-dev
	wayland-protocols
	"
source="$pkgname-$pkgver.tar.gz::https://github.com/hyprwm/xdg-desktop-portal-hyprland/archive/refs/tags/v$pkgver.tar.gz"
options="!check" # no tests

build() {
	abuild-meson \
		-Db_lto=true \
		-Dsd-bus-provider=basu \
		-Dsystemd=disabled \
		. output
	meson compile -C output
}

package() {
	DESTDIR="$pkgdir" meson install --no-rebuild -C output
}


sha512sums="
3b6955f15ae86a7552d39bf107cfd153fe0fff68cc4b87b277b8010f40a267446cc9c8f51975197f2fc4333b854e2e2a549e03cbdde63675a51dd12b0ce185f3  xdg-desktop-portal-hyprland-0.4.0.tar.gz
"
