# Automatically generated by apkbuild-cpan, template 1
# Contributor: Francesco Colista <fcolista@alpinelinux.org>
# Maintainer: Francesco Colista <fcolista@alpinelinux.org>
pkgname=perl-number-format
_pkgreal=Number-Format
pkgver=1.76
pkgrel=1
pkgdesc="Perl extension for formatting numbers"
url="https://metacpan.org/release/Number-Format/"
arch="noarch"
license="GPL PerlArtistic"
depends="perl"
makedepends="perl-test-simple"
subpackages="$pkgname-doc"
source="https://cpan.metacpan.org/authors/id/R/RJ/RJBS/$_pkgreal-$pkgver.tar.gz"
options="!check"

builddir="$srcdir/$_pkgreal-$pkgver"

prepare() {
	cd "$builddir"
	export CFLAGS=$(perl -MConfig -E 'say $Config{ccflags}')
	PERL_MM_USE_DEFAULT=1 perl Makefile.PL INSTALLDIRS=vendor
}

build() {
	cd "$builddir"
	export CFLAGS=$(perl -MConfig -E 'say $Config{ccflags}')
	make
}

package() {
	cd "$builddir"
	make DESTDIR="$pkgdir" install || return 1
	find "$pkgdir" \( -name perllocal.pod -o -name .packlist \) -delete
}

check() {
	cd "$builddir"
	make test
}

sha512sums="
c7132bbd036522d35082ee18a5ca534ee8820e3d8901293621a7f573a0f44ee6c652a91a7ca9d44c8a9185e1c9306dfbd79757c9b3818dc6de3cca761883790a  Number-Format-1.76.tar.gz
"
