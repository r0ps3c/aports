# Maintainer: Celeste <cielesti@protonmail.com>
maintainer="Celeste <cielesti@protonmail.com>"
pkgname=repology-cli
pkgver=1.4.0
pkgrel=0
pkgdesc="Command line interface for Repology.org"
url="https://github.com/ibara/repology"
arch="x86_64 aarch64 loongarch64" # ldc
license="ISC"
depends="libcurl" # loaded at runtime
makedepends="chrpath ldc"
subpackages="$pkgname-doc"
source="https://github.com/ibara/repology/releases/download/v$pkgver/repology-$pkgver.tar.gz
	default-repo-alpine_edge.patch
	"
builddir="$srcdir/repology-$pkgver"

build() {
	make DMD=ldmd2

	chrpath -d ./repology
}

check() {
	./repology --version
}

package() {
	install -Dvm755 repology -t "$pkgdir"/usr/bin/
	install -Dvm644 repology.1 -t "$pkgdir"/usr/share/man/man1/
	install -Dvm644 LICENSE -t "$pkgdir"/usr/share/licenses/$pkgname/
}

sha512sums="
ebbb855914ead8cafe43a3ed1035d735c0840625a69a98b6fbd3c9723abe575a4b45ff1c9176a1862a7819327e8f06f5b1356114d5958acce56069bf1a995af1  repology-1.4.0.tar.gz
8aef9956f04e2724a10a3b91b5d133704b97bf9aa28d37a7b0ebcdf2af6cbde5914512de6d7c7ab7d59dc859172520918698fac9154f1a1561bac67fb0dd0a10  default-repo-alpine_edge.patch
"
