# Automatically generated by apkbuild-cpan, template 4
# Contributor: Francesco Colista <fcolista@alpinelinux.org>
# Maintainer: Francesco Colista <fcolista@alpinelinux.org>
pkgname=perl-autobox
pkgver=3.0.2
pkgrel=0
#_pkgreal is used by apkbuild-cpan to find modules at MetaCpan
_pkgreal=autobox
pkgdesc="call methods on native types"
url="https://metacpan.org/release/autobox/"
arch="all"
license="Artistic-2.0"
depends="perl perl-scope-guard"
makedepends="perl-dev"
checkdepends="perl-ipc-system-simple perl-test-fatal"
subpackages="$pkgname-doc"
source="https://cpan.metacpan.org/authors/id/C/CH/CHOCOLATE/autobox-v$pkgver.tar.gz"
builddir="$srcdir/$_pkgreal-v$pkgver"

build() {
	export CFLAGS=$(perl -MConfig -E 'say $Config{ccflags}')
	PERL_MM_USE_DEFAULT=1 perl -I. Makefile.PL \
		INSTALLDIRS=vendor \
		NO_PACKLIST=1 \
		NO_PERLLOCAL=1
	make
}

check() {
	export CFLAGS=$(perl -MConfig -E 'say $Config{ccflags}')
	make test
}

package() {
	make DESTDIR="$pkgdir" install
}

sha512sums="
6845090165a738b692d5e673d72e9d34eb0a49c332b31df351f1cc114eeaf51d729455d6993fa54e0bcc6ed2f3a148dcfa0079c9fad0910b5df39e281e54c2b6  autobox-v3.0.2.tar.gz
"
