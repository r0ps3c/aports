# Contributor: Dominika Liberda <ja@sdomi.pl>
# Maintainer: Dominika Liberda <ja@sdomi.pl>
pkgname=nvidia-src
pkgver=525.85.05
pkgrel=0
pkgdesc="NVIDIA Linux open GPU kernel module source (sources, AKMS)"
url="https://github.com/NVIDIA/open-gpu-kernel-modules"
# x86_64/aarch64 only
arch="noarch !riscv64 !s390x !armhf !armv7 !x86 !ppc64le"
license="MIT AND GPL-2.0-or-later"
depends="akms"
source="nvidia-$pkgver.tar.gz::https://github.com/NVIDIA/open-gpu-kernel-modules/archive/refs/tags/$pkgver.tar.gz
	AKMBUILD"
builddir="$srcdir/open-gpu-kernel-modules-$pkgver"
options="!check" # no tests

package() {
	mkdir -p "$pkgdir"/usr/src
	cp -r "$builddir" "$pkgdir"/usr/src/nvidia-$pkgver
	install -Dm644 "$srcdir"/AKMBUILD "$pkgdir"/usr/src/nvidia-$pkgver/AKMBUILD
}

sha512sums="
aebe947c2324cb50db3bcf93a12308aa39f018b68ca9dc5dd0a4d959eacbf67e4b85169be4e9a03b46e2743594c7b175a8c7f257412c36cdf539061790e1103e  nvidia-525.85.05.tar.gz
d4861f5526afd32286566c8edf06464c54602caadeadac3c7f011a98557c0dfbc27a733a23dec9e031f8a1be9507059703061744ebda14225f43e06ee90c89fe  AKMBUILD
"
