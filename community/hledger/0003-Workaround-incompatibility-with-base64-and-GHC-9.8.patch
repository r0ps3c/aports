From 6ad88112a2a8218ab3dc28d3022be3f68dbb8353 Mon Sep 17 00:00:00 2001
From: Simon Michael <simon@joyful.com>
Date: Sun, 18 Feb 2024 15:17:39 -1000
Subject: [PATCH] Workaround incompatibility with base64 and GHC 9.8

See https://github.com/simonmichael/hledger/issues/2166
---
 hledger-web/cabal.project     | 2 ++
 hledger-web/hledger-web.cabal | 2 +-
 2 files changed, 3 insertions(+), 1 deletion(-)
 create mode 100644 hledger-web/cabal.project

diff --git a/hledger-web/cabal.project b/hledger-web/cabal.project
new file mode 100644
index 000000000..f16921ad5
--- /dev/null
+++ b/hledger-web/cabal.project
@@ -0,0 +1,2 @@
+packages: *.cabal
+allow-newer: base64:base
diff --git a/hledger-web/hledger-web.cabal b/hledger-web/hledger-web.cabal
index 0a7db4add..4810a51f2 100644
--- a/hledger-web/hledger-web.cabal
+++ b/hledger-web/hledger-web.cabal
@@ -156,7 +156,7 @@ library
       Decimal >=0.5.1
     , aeson >=1 && <2.3
     , base >=4.14 && <4.20
-    , base64
+    , base64 <1
     , blaze-html
     , blaze-markup
     , bytestring
