# Contributor: SÃ¶ren Tempel <soeren+alpine@soeren-tempel.net>
# Maintainer: Celeste <cielesti@protonmail.com>
pkgname=clingo
pkgver=5.7.0
pkgrel=0
pkgdesc="Grounder and solver for logic programs"
url="https://potassco.org/clingo/"
arch="all"
license="MIT"
depends="!clasp" # both provide /usr/bin/clasp
makedepends="python3-dev cmake samurai"
subpackages="$pkgname-dev $pkgname-libs py3-$pkgname:py"
options="!check"
source="https://github.com/potassco/clingo/archive/v$pkgver/clingo-$pkgver.tar.gz"
replaces="gringo" # backwards compatibility

build() {
	cmake -B build -G Ninja \
		-DCMAKE_INSTALL_PREFIX=/usr \
		-DCMAKE_INSTALL_LIBDIR=lib \
		-DCMAKE_BUILD_TYPE=None \
		-DCLINGO_BUILD_TESTS="$(want_check && echo ON || echo OFF)"
	cmake --build build
}

package() {
	DESTDIR="$pkgdir" cmake --install build
}

py() {
	pkgdesc="Python bindings for clingo"
	depends="python3"

	amove usr/lib/python*
}

sha512sums="
bf29f86dc1ade185754443f6447d2d26ea983e9fb2c3a61b3c5e586271015a0acccaed82497a54eca04cc6992acda0292faf4bb7ee497fbc6ba55d5036ea5c8a  clingo-5.7.0.tar.gz
"
