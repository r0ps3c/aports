Patch-Source: https://github.com/chimera-linux/cports/blob/18c7797b1d0b26e9dc71c80f2116c36019c2068b/contrib/firefox-esr/patches/authenticator-riscv64.patch
Patch-Source: https://github.com/mozilla/authenticator-rs/commit/35168459db3b4d617df3779ff7e016553eb17d42
--
commit 35fc794c337e5ce7fa0f889ca61b39c29ba0712a
Author: q66 <q66@chimera-linux.org>
Date:   Tue Oct 4 00:35:50 2022 +0200

    add riscv64 support to authenticator

diff --git a/third_party/rust/authenticator/build.rs b/third_party/rust/authenticator/build.rs
index 299e4df..c972d85 100644
--- a/third_party/rust/authenticator/build.rs
+++ b/third_party/rust/authenticator/build.rs
@@ -45,6 +45,8 @@ fn main() {
         "ioctl_aarch64be.rs"
     } else if cfg!(all(target_arch = "s390x", target_endian = "big")) {
         "ioctl_s390xbe.rs"
+    } else if cfg!(all(target_arch = "riscv64", target_endian = "little")) {
+        "ioctl_riscv64.rs"
     } else {
         panic!("architecture not supported");
     };
diff --git a/third_party/rust/authenticator/src/linux/hidwrapper.rs b/third_party/rust/authenticator/src/linux/hidwrapper.rs
index ea1a390..82aabc6 100644
--- a/third_party/rust/authenticator/src/linux/hidwrapper.rs
+++ b/third_party/rust/authenticator/src/linux/hidwrapper.rs
@@ -46,3 +46,6 @@ include!("ioctl_aarch64be.rs");
 
 #[cfg(all(target_arch = "s390x", target_endian = "big"))]
 include!("ioctl_s390xbe.rs");
+
+#[cfg(all(target_arch = "riscv64", target_endian = "little"))]
+include!("ioctl_riscv64.rs");
diff --git a/third_party/rust/authenticator/src/linux/ioctl_riscv64.rs b/third_party/rust/authenticator/src/linux/ioctl_riscv64.rs
new file mode 100644
index 0000000..a784e9b
--- /dev/null
+++ b/third_party/rust/authenticator/src/linux/ioctl_riscv64.rs
@@ -0,0 +1,5 @@
+/* automatically generated by rust-bindgen */
+
+pub type __u32 = ::std::os::raw::c_uint;
+pub const _HIDIOCGRDESCSIZE: __u32 = 2147764225;
+pub const _HIDIOCGRDESC: __u32 = 2416199682;
