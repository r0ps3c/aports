# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=a2ps
pkgver=4.15
pkgrel=0
pkgdesc="a2ps is an Any to PostScript filter"
url="https://www.gnu.org/software/a2ps/"
arch="all"
license="GPL-3.0-or-later"
# bash is needed for a2ps-lpr-wrapper
depends="
	bash
	ghostscript
	imagemagick
	perl
	"
makedepends="
	gc-dev
	gperf
	libpaper-dev
	"
subpackages="$pkgname-doc $pkgname-emacs"
source="https://ftp.gnu.org/gnu/a2ps/a2ps-$pkgver.tar.gz"

build() {
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--sysconfdir=/etc/a2ps \
		--includedir=/usr/include \
		--disable-nls
	make
}

package() {
	make DESTDIR="$pkgdir" install
}

emacs() {
	pkgdesc="$pkgdesc (emacs plugin)"
	install_if="$pkgname=$pkgver-r$pkgrel emacs"

	amove usr/share/emacs
}

sha512sums="
4d88ed4c65c636aa7640e01cf19c259775a810eb91495dc39726554c8ab3b89a105d947c3b357a5b16e5d120b5530587b1838a99829862c9c081b5ae1b354798  a2ps-4.15.tar.gz
"
