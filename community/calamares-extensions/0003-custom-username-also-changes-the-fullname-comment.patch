From cae8acb4a480e481771b46b9854bcab3640f74f0 Mon Sep 17 00:00:00 2001
From: Nathan Schulte <nmschulte@desmas.net>
Date: Thu, 3 Aug 2023 14:52:59 -0500
Subject: [PATCH] custom username also changes the fullname/comment

---
 modules/mobile/Config.cpp  | 2 +-
 modules/mobile/mobile.conf | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/modules/mobile/Config.cpp b/modules/mobile/Config.cpp
index 414b2d4..145aa8a 100644
--- a/modules/mobile/Config.cpp
+++ b/modules/mobile/Config.cpp
@@ -61,7 +61,7 @@ Config::setConfigurationMap( const QVariantMap& cfgMap )
 
     m_cmdInternalStoragePrepare = getString( cfgMap, "cmdInternalStoragePrepare", "ondev-internal-storage-prepare" );
     m_cmdPasswd = getString( cfgMap, "cmdPasswd", "passwd" );
-    m_cmdUsermod = getString( cfgMap, "cmdUsermod", "xargs -I{} -n1 usermod -m -d /home/{} -l {} user");
+    m_cmdUsermod = getString( cfgMap, "cmdUsermod", "xargs -I{} -n1 usermod -m -d /home/{} -l {} -c {} user");
 
     m_cmdSshdEnable = getString( cfgMap, "cmdSshdEnable", "systemctl enable sshd.service" );
     m_cmdSshdDisable = getString( cfgMap, "cmdSshdDisable", "systemctl disable sshd.service" );
diff --git a/modules/mobile/mobile.conf b/modules/mobile/mobile.conf
index 0b773df..f2a1a9a 100644
--- a/modules/mobile/mobile.conf
+++ b/modules/mobile/mobile.conf
@@ -157,7 +157,7 @@ bogus: true
 
 ## Change the username for the default user
 ## Stdin: username with \n
-# cmdUsermod: "xargs -I{} -n1 usermod -m -d /home/{} -l {} user"
+# cmdUsermod: "xargs -I{} -n1 usermod -m -d /home/{} -l {} -c {} user"
 
 ## Set the password for default user and sshd user
 ## Arguments: <username>
-- 
2.34.1

