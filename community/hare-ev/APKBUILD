# Maintainer: Willow Barraco <contact@willowbarraco.fr>
pkgname=hare-ev
pkgver="0_git20230811"
_commit=5082e739aba6ff06925cca6084bee899e9dab07a
pkgrel=1
pkgdesc="Event loop for Hare"
url="https://git.sr.ht/~sircmpwn/hare-ev"
arch="x86_64 aarch64 riscv64" # hare
license="MPL-2.0"
makedepends="hare"
source="
	$pkgname-$_commit.tar.gz::https://git.sr.ht/~sircmpwn/$pkgname/archive/$_commit.tar.gz
"
builddir="$srcdir/$pkgname-$_commit"

build() {
	# Hare actually passes LDFLAGS to LD, not to CC, who would've thunk
	unset LDFLAGS
	make -j1 PREFIX=/usr
}

check() {
	make check
}

package() {
	make DESTDIR="$pkgdir" PREFIX=/usr install
}

sha512sums="
24ba963002377bf07c5c129b1782da529ab63895097af0ba98335ad0750239e6694f88d49675c123585c2067afc847594d955e73e1b40df2027a3cebc2936edd  hare-ev-5082e739aba6ff06925cca6084bee899e9dab07a.tar.gz
"
