# Contributor: Michał Polański <michal@polanski.me>
# Maintainer: Michał Polański <michal@polanski.me>
pkgname=difftastic
pkgver=0.53.0
pkgrel=0
pkgdesc="Diff tool that understands syntax"
url="https://difftastic.wilfred.me.uk/"
license="MIT"
arch="all"
makedepends="cargo openssl-dev cargo-auditable"
options="net"
source="https://github.com/Wilfred/difftastic/archive/$pkgver/difftastic-$pkgver.tar.gz"

prepare() {
	default_prepare
	cargo fetch --target="$CTARGET" --locked
}

build() {
	cargo auditable build --frozen --release
}

check() {
	cargo test --frozen
}

package() {
	install -Dm755 target/release/difft -t "$pkgdir"/usr/bin/
}

sha512sums="
af99d6046f9fa0171ec47179ecb1628be8a06f8db9dbb4ea4891e5fbd0c6b0948ed4ce2165f061ac4ed812517a1af372c3de7b0026147d1d6b1fa4ffc159f30d  difftastic-0.53.0.tar.gz
"
