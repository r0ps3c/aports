--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -7,9 +7,9 @@
 get_git_version(GIT_VERSION SEM_VER)
 get_git_head(GIT_COMMIT)
 
-project(ttyd VERSION "${SEM_VER}" LANGUAGES C)
+project(ttyd VERSION "${PROJECT_VERSION}" LANGUAGES C)
 
-if(NOT "{GIT_COMMIT}" STREQUAL "")
+if(NOT "${GIT_COMMIT}" STREQUAL "unknown")
     set(PROJECT_VERSION "${PROJECT_VERSION}-${GIT_COMMIT}")
 endif()
 
