# Automatically generated by apkbuild-cpan, template 4
# Contributor: Antoine Martin (ayakael) <dev@ayakael.net>
# Maintainer: Antoine Martin (ayakael) <dev@ayakael.net>
pkgname=hsxkpasswd
pkgver=3.6
pkgrel=1
#_pkgreal is used by apkbuild-cpan to find modules at MetaCpan
_pkgreal=Crypt-HSXKPasswd
pkgdesc="A secure memorable password generator inspired by the famous XKCD password cartoon (https://xkcd.com/936/)"
url="https://metacpan.org/release/Crypt-HSXKPasswd/"
arch="noarch"
# Two tests fail as a result of https://github.com/bbusschots/hsxkpasswd/issues/42
# (also see https://github.com/bbusschots/hsxkpasswd/issues/43)
options="!check"
license="BSD-2-Clause"
depends="
	perl
	perl-clone
	perl-data-entropy
	perl-datetime
	perl-email-valid
	perl-file-homedir
	perl-json
	perl-list-moreutils
	perl-math-random-secure
	perl-math-round
	perl-readonly
	perl-text-unidecode
	perl-type-tiny
	perl-file-sharedir
	"
makedepends="perl-module-build perl-file-share"
subpackages="$pkgname-doc"
source="https://cpan.metacpan.org/authors/id/B/BA/BARTB/Crypt-HSXKPasswd-v$pkgver.tar.gz"
builddir="$srcdir/$_pkgreal-v$pkgver"

build() {
	export CFLAGS=$(perl -MConfig -E 'say $Config{ccflags}')
	perl Build.PL \
		--installdirs=vendor \
		--create_packlist=0
	./Build
}

check() {
	./Build test
}

package() {
	./Build install --destdir="$pkgdir"
}

sha512sums="
bacb9d6f6b1da94c18ebf53463ed6cce654634b94d21769e3a2733344086d84f862e7e9f7058dbf11413e27ac36bb8f178ca00afb302baa28277f455a87df194  Crypt-HSXKPasswd-v3.6.tar.gz
"
