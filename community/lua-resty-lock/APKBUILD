# Contributor: Francesco Colista <fcolista@alpinelinux.org>
# Maintainer: Francesco Colista <fcolista@alpinelinux.org>
pkgname=lua-resty-lock
pkgver=0.09
pkgrel=1
pkgdesc="Simple nonblocking lock API for ngx_lua based on shared memory dictionaries"
url="https://github.com/openresty/lua-resty-lock"
arch="all !ppc64le !riscv64"
license="BSD-1-Clause"
depends="lua lua-resty-core"
source="$pkgname-$pkgver.tar.gz::https://github.com/openresty/lua-resty-lock/archive/refs/tags/v$pkgver.tar.gz
fix-version.patch"
options="!check"

package() {
	mkdir -p "$pkgdir/usr/share/lua/common"
	cp -r ./lib/resty "$pkgdir/usr/share/lua/common"
}
sha512sums="
1647c344daf506999b55bba5e9734586906cb612e4c53e8c8f78ba0fa0ff4d9cc1971303d69f18efc2065c47a7c2e5ded41589dc499c4ba58727e8607a2d5b98  lua-resty-lock-0.09.tar.gz
76715500bfaca833104f9d2790600947a5342f02822e965ab152667de33536142191169379c21273cb8df28a212a67fce2ada34d036484ca1e8e301cacd7f1ee  fix-version.patch
"
