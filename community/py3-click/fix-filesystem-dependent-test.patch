Patch-Source: https://github.com/pallets/click/pull/2946

--- a/tests/test_types.py
+++ b/tests/test_types.py
@@ -226,7 +226,8 @@ def test_path_surrogates(tmp_path, monkeypatch):
 def test_file_surrogates(type, tmp_path):
     path = tmp_path / "\udcff"
 
-    with pytest.raises(click.BadParameter, match="�': No such file or directory"):
+    match = r"(�': No such file or directory|Illegal byte sequence)"
+    with pytest.raises(click.BadParameter, match=match):
         type.convert(path, None, None)
 
 
