# Contributor: Sodface <sod@sodface.com>
# Maintainer: Sodface <sod@sodface.com>
pkgname=lowdown
pkgver=2.0.2
_pkgver="${pkgver//./_}"
pkgrel=0
pkgdesc="Simple markdown translator"
url="https://kristaps.bsd.lv/lowdown/"
arch="all"
license="ISC"
makedepends="bmake"
depends_dev="$pkgname=$pkgver-r$pkgrel"
subpackages="$pkgname-dev $pkgname-doc $pkgname-libs"
source="$pkgname-$pkgver.tar.gz::https://github.com/kristapsdz/lowdown/archive/refs/tags/VERSION_$_pkgver.tar.gz"
builddir="$srcdir/$pkgname-VERSION_$_pkgver"

build() {
	# standalone configure script not generated by autoconf
	./configure PREFIX=/usr MANDIR=/usr/share/man LDFLAGS="$LDFLAGS"
	bmake
}

check() {
	bmake regress
}

package() {
	bmake DESTDIR="$pkgdir" install install_libs
}

sha512sums="
ebd927776f13e78c26e1c001e8586dc43fe1e64d1c537a18cd71bd6a8936c93a9fefcb58c53e94a7c0727b525f6c6a21ab70b924db8c7c105161a6a92d9c96fa  lowdown-2.0.2.tar.gz
"
