# Contributor: Sodface <sod@sodface.com>
# Maintainer: Sodface <sod@sodface.com>
pkgname=lowdown
pkgver=2.0.0
_pkgver="${pkgver//./_}"
pkgrel=0
pkgdesc="Simple markdown translator"
url="https://kristaps.bsd.lv/lowdown/"
arch="all"
license="ISC"
makedepends="bmake"
depends_dev="$pkgname=$pkgver-r$pkgrel"
subpackages="$pkgname-dev $pkgname-doc $pkgname-libs"
source="$pkgname-$pkgver.tar.gz::https://github.com/kristapsdz/lowdown/archive/refs/tags/VERSION_$_pkgver.tar.gz"
builddir="$srcdir/$pkgname-VERSION_$_pkgver"

build() {
	# standalone configure script not generated by autoconf
	./configure PREFIX=/usr MANDIR=/usr/share/man LDFLAGS="$LDFLAGS"
	bmake
}

check() {
	bmake regress
}

package() {
	bmake DESTDIR="$pkgdir" install install_libs
}

sha512sums="
520741453556710ebdd379de2f1b6444c0019ed556e5c9852b1bb8b2cbd5853cf5edb80e65dc9e1d4fabfb028b96af0adf776642ba07aa3af436d4c57e7d7811  lowdown-2.0.0.tar.gz
"
