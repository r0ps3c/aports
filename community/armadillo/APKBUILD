# Contributor: Holger Jaekel <holger.jaekel@gmx.de>
# Maintainer: Holger Jaekel <holger.jaekel@gmx.de>
pkgname=armadillo
pkgver=14.2.1
pkgrel=0
pkgdesc="C++ library for linear algebra & scientific computing"
url="https://arma.sourceforge.net/"
arch="all"
license="Apache-2.0"
options="!check"  # Armadillo must be installed before the tests can be compiled
depends_dev="
	hdf5-dev
	superlu-dev
	"
makedepends="
	$depends_dev
	arpack-dev
	cmake
	openblas-dev
	samurai
	"
subpackages="$pkgname-dev"
source="https://downloads.sourceforge.net/project/arma/armadillo-$pkgver.tar.xz"

build() {
	cmake -B build -G Ninja \
		-DCMAKE_BUILD_TYPE=MinSizeRel \
		-DCMAKE_INSTALL_LIBDIR=lib
	cmake --build build
}

package() {
	DESTDIR="$pkgdir" cmake --install build

	cd "$pkgdir"
	mkdir -p usr/lib/cmake
	mv usr/share/Armadillo/CMake/* usr/lib/cmake/
	rm -rf usr/share
}

sha512sums="
d25a4f10f1221c16c5862bb089b1b6ec30ab15a49083a349bdc24c74b6f84c8201561252a4f93cd7ae8828e541293e56a79688a865f431d14e9e90056f344ac1  armadillo-14.2.1.tar.xz
"
