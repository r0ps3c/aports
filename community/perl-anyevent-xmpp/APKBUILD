# Automatically generated by apkbuild-cpan, template 4
# Maintainer: Celeste <cielesti@protonmail.com>
maintainer="Celeste <cielesti@protonmail.com>"
pkgname=perl-anyevent-xmpp
pkgver=0.55
pkgrel=0
#_pkgreal is used by apkbuild-cpan to find modules at MetaCpan
_pkgreal=AnyEvent-XMPP
pkgdesc="AnyEvent implementation of the XMPP Protocol"
url="https://metacpan.org/release/AnyEvent-XMPP/"
arch="noarch"
license="GPL-1.0-or-later OR Artistic-1.0-Perl"
depends="
	perl perl-anyevent perl-authen-sasl perl-net-libidn perl-net-ssleay
	perl-object-event perl-xml-parser perl-xml-twig perl-xml-writer
	"
subpackages="$pkgname-doc"
source="https://cpan.metacpan.org/authors/id/M/MS/MSTPLBG/AnyEvent-XMPP-$pkgver.tar.gz
	delivery-receipt-1.patch
	delivery-receipt-2.patch
	doc-typo-fix.patch
	"
builddir="$srcdir/$_pkgreal-$pkgver"

build() {
	export CFLAGS=$(perl -MConfig -E 'say $Config{ccflags}')
	PERL_MM_USE_DEFAULT=1 perl -I. Makefile.PL \
		INSTALLDIRS=vendor \
		NO_PACKLIST=1 \
		NO_PERLLOCAL=1
	make
}

check() {
	export CFLAGS=$(perl -MConfig -E 'say $Config{ccflags}')
	make test
}

package() {
	make DESTDIR="$pkgdir" install
}

sha512sums="
a4e952e91771bd446c53f26aaf54099a53c475d2f20945f05d00f036388afc323108e9e3bbc4fa56dfde579e538538d845ba308d426d35bdc50054246e9e8d1f  AnyEvent-XMPP-0.55.tar.gz
875f0487b1a07e3a410a9f28e7206e8815f45eca8c82b37dd6d16c28126c7ea33a9c9d3382fecd3cc5f7627196ce41a86ef8546e12d5a0a05d32e6f3e567246e  delivery-receipt-1.patch
67b6c9c44c9e4f30e9351beb22135ca288acd410a6245c824b44fea3d6fad5ae358f86c436f618f3685ec94bf7b103e813329fbb92cec9c4a9d52295acda9615  delivery-receipt-2.patch
3d4e6bad56a8a0b7e849ded903e5e9d339debcac89524783d3a6ae4a567b91ee1dfad49f97fb45433b4dbc1c7c28a548e938b9ff04503f2e4434fd421b575b32  doc-typo-fix.patch
"
